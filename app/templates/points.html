{% extends "base.html" %}
{% block content %}
<h1>{{ strings['points.heading'] }}</h1>
<div class="card">
    <h3>{{ strings['points.balances'] }}</h3>
    <ul>
        {% for uid, balance in balances.items() %}
        <li>{{ users[uid].display_name if users.get(uid) else uid }}: {{ balance }} pts</li>
        {% endfor %}
    </ul>
</div>
<table>
    <thead><tr><th>{{ strings['points.date'] }}</th><th>{{ strings['points.user'] }}</th><th>{{ strings['points.amount'] }}</th><th>{{ strings['points.type'] }}</th><th>{{ strings['points.description'] }}</th></tr></thead>
    <tbody>
        {% for tx in transactions %}
        <tr>
            <td>{{ tx.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
            <td>{{ users[tx.user_id].display_name if users.get(tx.user_id) else tx.user_id }}</td>
            <td>{{ tx.amount }}</td>
            <td>{{ tx.transaction_type }}</td>
            <td>{{ tx.description }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
